---
import Base from "../../layouts/Base.astro";

import { addOffre } from "../../js/backend.mjs";

let message = '';
if (Astro.request.method === "POST") {
    const formData = await Astro.request.formData();
    const response = await addOffre(formData);
    message = response.message;
}
---

<Base>
    <h1 class="text-lg">Ajouter une offre</h1>
    <form class="gap-2 text-black flex flex-col justify-center w-full" action="/offres/add" method="POST" enctype="multipart/form-data">
        <input class="w-1/3 mt-2 p-2 border border-gray-300 rounded-md" type="text" name="nomMaison" placeholder="Nom de la maison" required  />
        <input class="w-1/3 mt-2 p-2 border border-gray-300 rounded-md" type="number" name="prix" placeholder="Prix" required />
        <input class="w-1/3 mt-2 p-2 border border-gray-300 rounded-md" type="number" name="nbSdb" placeholder="Nombre de salles de bain"  required />
        <input class="w-1/3 mt-2 p-2 border border-gray-300 rounded-md" type="number" name="nbChambres" placeholder="Nombre de chambres"  required />
        <input class="w-1/3 mt-2 p-2 border border-gray-300 rounded-md" type="number" name="surface" placeholder="Superficie"  required />
        <input class="w-1/3 mt-2 p-2 border border-gray-300 rounded-md" type="file" name="image"  />
        <button class="w-1/3 bg-indigo-100 text-indigo-500 rounded-md" type="submit">Ajouter</button>
    </form>
</Base>